---
- summary: |
    Регистрация при помощи логина и пароля
  requirement: |
    У пользователей должна быть возможность зарегистрироваться на сайте при помощи логина 
    и пароля/учетной записи на Github/учетной записи в Discord
  prerequisites: |
    нет
  test-data: |
    Тестовые данные
    Логин = test@test.ru
    Пароль = 111111
    Никнейм = Alex
  steps:
    - Вводим Nickname
    - Вводим логин
    - Вводим пароль
    - Нажимаем кнопку Submit
  expected-result: |
    Пользователь должен быть авторизован и находиться на странице лобби

- summary: |
    Авторизация при помощи логина и пароля
  requirement: |
    На сайте доступ к его игровому функционалу должен осуществляться после авторизации
  prerequisites: |
    Пользователь должен быть разавторизован
    Пользователь должен пройти предварительно регистрацию по логину и паролю
  test-data: |
    Логин = test@test.ru
    Пароль = 111111
  steps:
    - Вводим логин
    - Вводим пароль
    - Нажимаем кнопку Submit
  expected-result: |
    Пользователь должен быть авторизован и находиться на странице лобби

- summary: |
    Восстановление доступа для учетной записи, которую создавали при помощи логина и пароля
  requirement: |
    Сайт должен позволять пользователю восстановить пароль, если он регистрировался по логину и паролю.
  prerequisites: |
    Пользователь должен быть разавторизован
    Пользователь должен пройти предварительно регистрацию по логину и паролю.
    При регистрации пользователь должен использовать почту, к которой у него есть доступ
  test-data: |
    Логин = test@test.ru
    Новый пароль = 111112
  steps:
    - Вводим логин
    - Нажимаем кнопку Submit
    - Переходим по ссылке из письма
    - Вводим новый пароль
    - Подтверждаем смену пароля
  expected-result: |
    Пользователь должен увидеть на экране сообщение, что пароль изменен.

- summary: |
    Авторизация при помощи учетной записи Github
  requirement: |
    На сайте доступ к его игровому функционалу должен осуществляться после авторизации
  prerequisites: |
    У пользователя должен быть аккаунт на GitHub
    Пользователь авторизован в GitHub
    Пользователь зарегистрирован при помощи учетной записи GitHub
  test-data: |
    Аккаунт на GitHub
  steps:
    - Выбираем способ авторизации через GitHub
    - Даем разрешение сайту на GitHub использовать учетную запись
  expected-result: |
    Пользователь должен быть авторизован и находиться на странице лобби

- summary: |
    Авторизация при помощи учетной записи Discord
  requirement: |
    На сайте доступ к его игровому функционалу должен осуществляться после авторизации
  prerequisites: |
    У пользователя должен быть аккаунт в Discord
    Пользователь авторизован в Discord
    Пользователь зарегистрирован при помощи учетной записи Discord
  test-data: |
    Аккаунт в Discord
  steps:
    - Выбираем способ авторизации через Discord
    - Подтверждаем на сайте Discord разрешение использовать учетную запись
  expected-result: |
    Пользователь должен быть авторизован и находиться на странице лобби

- summary: |
    Создание игры с ботом, уровнем сложности easy и рандомным заданием по тэгу string
  requirement: |
    Пользователь должен иметь возможность создавать на сайте игру с ботом
  prerequisites: |
    Пользователь авторизован на сайте
  test-data: |
    нет
  steps:
    - Нажать Создать игру на главной странице
    - Выбрать тип Игра с ботом
    - Выбрать уровень сложности easy
    - Включить тэг задания string
    - Установить длительность игры 10 минут
    - Подтвердить создание игры
  expected-result: |
    Создана игра со случайно выбранным ботом, длительностью игры 10 минут, заданием, связанным с работой над строками

- summary: |
    Создание игры с приглашением, уровнем сложности elementary и рандомным заданием по тэгу math
  requirement: |
    Пользователь должен иметь возможность создавать на сайте закрытую игру с приглашением.
  prerequisites: |
    Пользователь1 авторизован на сайте
    Пользователь2 авторизован на сайте
  test-data: |
    нет
  steps:
    - Пользователь1 нажимает Создать игру на главной странице
    - Пользователь1 выбирает тип Игра с другом
    - Выбрать уровень сложности elementary
    - Включить тэг задания math
    - Установить длительность игры 12 минут
    - Пользователь1 выбирает в списке пользователей учетную запись Пользователя2
    - Пользователь2 принимает приглашение
  expected-result: |
    Создана игра Пользователя1 с Пользователем2, с длительностью игры 12 минут, заданием, связанным с математическими вычислениями 

- summary: |
    Создание открытой игры
  requirement: |
    Пользователь должен иметь возможность создавать на сайте открытую игру, к которой могут присоединиться любые желающие.
  prerequisites: |
    Пользователь авторизован на сайте
  test-data: |
    нет
  steps:
    - Пользователь нажимает Создать игру на главной странице
    - Пользователь выбирает тип With other user
    - Выбрать уровень сложности medium
    - Включить тэг задания collection
    - Установить длительность игры 15 минут
  expected-result: |
    Игра создана и находится в режиме ожидания второго игрока

- summary: |
    Создание игры с ботом, уровнем сложности hard и рандомным заданием по тэгу rest
  requirement: |
    Пользователь может управлять настройками игры во время создания - длительность, уровень сложности, тип игры (открытая, закрытая, с ботом), тэги, задание.
  prerequisites: |
    Пользователь авторизован на сайте
  test-data: |
    нет
  steps:
    - Пользователь нажимает Создать игру на главной странице
    - Пользователь выбирает тип Игра с ботом
    - Выбрать уровень сложности hard
    - Включить тэг задания rest
    - Установить длительность игры 20 минут
  expected-result: |
    Создана игра со случайно выбранным ботом, длительностью игры 20 минут, заданием, выбранным случайным образом согласна тэга rest и уровня сложности hard

- summary: |
    Отображение на экране процесса набора кода оппонентом
  requirement: |
    Пользователь должен видеть в режиме онлайн, как справляется с решением задания его оппонент
  prerequisites: |
    Пользователь1 авторизован на сайте
    Пользователь2 авторизован на сайте
    Пользователь1 и Пользователь2 участвуют в одной игре
  test-data: |
    нет
  steps:
    - Пользователь1 в окне ввода кода в любом месте вводит символы "print"
  expected-result: |
    Пользователь2 видит на экране в окне с кодом Пользователь1 слово print

- summary: |
    Запуск тестов в игре, проверяющих написанный участником игры код 
  requirement: |
    Пользователь должен иметь возможность ввести свой программный код и проверить его
  prerequisites: |
    Пользователь создал игру с ботом
  test-data: |
    нет
  steps:
    - Пользователь вводит "print" в окне ввода кода
    - Пользователь запускает тесты, проверяющие код
  expected-result: |
    Пользователь видит на экране сообщение о том, что тесты не пройдены

- summary: |
    Просмотр результатов выполнения тестов
  requirement: |
    Пользователь должен иметь возможность видеть вывод тестов после запуска проверки своего решения
  prerequisites: |
    Пользователь создал игру с ботом
  test-data: |
    нет
  steps:
    - Пользователь вводит "print" в окне ввода кода
    - Пользователь запускает тесты, проверяющие код
    - Пользователь переключается в окно Output
    - Пользователь пролистывает строки вывода на вкладке Output
  expected-result: |
    На вкладке Output есть описание данных, какие данные передаются, какой результат ожидается, какой результат получен

- summary: |
    Смена языка программирования во время игры
  requirement: |
    Пользователь должен иметь возможность сменить язык программирования во время игры
  prerequisites: |
    Пользователь создал игру с ботом
  test-data: |
    нет
  steps:
    - Пользователь вводит "print" в окне ввода кода
    - Пользователь меняет язык программирования
  expected-result: |
    Окно ввода кода обновилось, в нем указано определение функции без слова print

- summary: |
    Запуск игры через вход по пригласительной ссылке
  requirement: |
    Пользователь может присоединиться к игре по пригласительной ссылке. Как только пользователь перешел по пригласительной ссылке, игра начинается
  prerequisites: |
    Пользователь1 авторизован на сайте
    Пользователь2 авторизован на сайте
  test-data: |
    нет
  steps:
    - Пользователь1 нажимает Создать игру на главной странице
    - Пользователь1 выбирает тип Игра с другим пользователем
    - Все остальные параметры игры оставляет без изменений
    - Пользователь1 подтверждает создание игры
    - Пользователь1 входит в игру в лобби, нажав Continue
    - Пользователь1 копирует пригласительную ссылку
    - Пользователь1 отправляет ссылку Пользователю 2 приватным сообщением
    - Пользователь2 переходит по ссылке из сообщения
    - Пользователь2 присоединяется к игре, нажав Join
  expected-result: |
    Пользователь2 перешел в игру

- summary: |
    Отмена созданной игры, доступной всем для присоединения
  requirement: |
    Пользователь может отменить созданную игру, доступную всем для присоединения
  prerequisites: |
    Пользователь1 авторизован на сайте
  test-data: |
    нет
  steps:
    - Пользователь1 нажимает Создать игру на главной странице
    - Пользователь1 выбирает тип Игра с другим пользователем
    - Все остальные параметры игры оставляет без изменений
    - Пользователь1 подтверждает создание игры
    - Пользователь1 входит в игру в лобби, нажав Continue
    - Пользователь1 отменяет игру
  expected-result: |
    Пользователь оказывается на странице лобби, на которой в списке доступных игр нет его игры

- summary: |
    Вход в доступную игру, созданную ботом, из списка в лобби
  requirement: |
    Пользователь может присоединиться к любой доступной игре (с ботом или зарегистрированным пользователем)
  prerequisites: |
    Пользователь авторизован на сайте
    В списке доступных игр в лобби есть игра, ожидающая партнера
  test-data: |
    нет
  steps:
    - Пользователь нажимает Fight в строке с игрой
  expected-result: |
    Игра запустилась у Пользователя

- summary: |
    Участие в двух играх одновременно
  requirement: |
    Пользователь в моменте может иметь только одну активную игру
  prerequisites: |
    Пользователь авторизован на сайте
    В списке доступных игр в лобби есть минимум 2 игры, ожидающие партнера
  test-data: |
    нет
  steps:
    - Пользователь нажимает Fight в строке с первой игрой 
    - Пользователь выходит из первой игры в лобби
    - Пользователь нажимает Fight в строке со второй игрой
  expected-result: |
    Пользователь видит сообщение с ошибкой

- summary: |
    Создание игры с заданием, которое выбрал пользователь
  requirement: |
    Сайт должен позволять выбрать пользователю задание на игру согласно выбранной сложности. 
    Либо сайт назначит задание согласно выбранного уровня, которое определит случайно.
  prerequisites: |
    Пользователь авторизован на сайте
  test-data: |
    нет
  steps:
    - Пользователь нажимает Создать игру на главной странице
    - Пользователь выбирает тип Игра с ботом
    - Пользователь выбрал level elementary
    - Пользователь выбирает задание add_two_number
    - Пользователь подтверждает создание игры
  expected-result: |
    Будет создана игра с заданием Посчитайте сумму цифр двухзначного целого числа n

- summary: |
    Отправка сообщения пользователю со страницы лобби
  requirement: |
    Пользователи должны иметь возможность отправлять друг другу приватные сообщения
  prerequisites: |
    Пользователь1 авторизован на сайте
    Пользователь2 авторизован на сайте
  test-data: |
    нет
  steps:
    - Пользователь1 выбирает пользователя2 в списке онлайн игроков
    - Нажимает Отправить сообщение
    - Вводит в поле вывода Hi
    - Отправляет сообщение
  expected-result: |
    Пользователь2 видит сообщение от пользователя1 на главном экране

- summary: |
    Отправка сообщения пользователю во время игры
  requirement: |
    Во время игры участники должны иметь возможность писать друг другу сообщения
  prerequisites: |
    Пользователь1 создал игру с Пользователем2
  test-data: |
    нет
  steps:
    - Пользователь1 вводит в игре в поле ввода сообщения Hi
    - Отправляет сообщение
  expected-result: |
    Пользователь2 видит сообщение от пользователя1 во время игры

- summary: |
    Просмотр записи игры
  requirement: |
    Сайт должен иметь возможность показать завершенную игру в записи
  prerequisites: |
    Пользователь должен иметь завершенную игру
  test-data: |
    нет
  steps:
    - Пользователь в разделе Completed Games выбирает свою игровому
    - Нажимает Show
    - Запускает проигрыватель
  expected-result: |
    Видео игры запустилось на экране

- summary: |
    Просмотр рейтинга пользователей
  requirement: |
    Пользователи должны получать очки, на основе которых строится рейтинг за неделю, месяц и за все время
  prerequisites: |
    нет
  test-data: |
    нет
  steps:
    - Пользователь заходит на страницу рейтинга пользователей (https://codebattle.hexlet.io/users)
    - Включает последовательно разные фильтры - недельный, месячный, общий
  expected-result: |
    Пользователь видит список пользователей, их рейтинги, позицию в списке - для каждого фильтра свой

- summary: |
    Создание приглашения другому пользователю
  requirement: |
    Пользователь должен иметь возможность пригласить другого пользователя в игру
  prerequisites: |
    Пользователь1 авторизован на сайте
    Пользователь2 авторизован на сайте
  test-data: |
    нет
  steps:
    - Пользователь1 нажимает Создать игру на главной странице
    - Пользователь1 выбирает тип Игра с другом
    - Пользователь1 выбирает в списке пользователей Пользователя2
    - Все остальные параметры игры оставляет без изменений
    - Пользователь1 подтверждает создание приглашения
  expected-result: |
    Пользователь1 и Пользователь2 видят на странице лобби, что число вызовов 1 (возле имени пользователя)

- summary: |
    Принятие приглашения
  requirement: |
    Пользователь, получив приглашение, может либо отказаться от него, либо принять его
  prerequisites: |
    Пользователь1 сделал приглашение Пользователю2
  test-data: |
    нет
  steps:
    - Пользователь2 в списке приглашений напротив приглашения Пользователя1 нажимает Accept
  expected-result: |
    Игра запустилась для Пользователя1 и Пользователя2

- summary: |
    Отказ на приглашения
  requirement: |
    Пользователь, получив приглашение, может либо отказаться от него, либо принять его
  prerequisites: |
    Пользователь1 сделал приглашение Пользователю2
  test-data: |
    нет
  steps:
    - Пользователь2 в списке приглашений напротив приглашения Пользователя1 нажимает Decline
  expected-result: |
    Пользователь1 и Пользователь2 видят на странице лобби, что число приглашений уменьшилось на 1 (возле имени пользователя)

- summary: |
    Отмена приглашения
  requirement: |
    Пользователь должен иметь возможность отменить свое приглашение
  prerequisites: |
    Пользователь1 отправил приглашение Пользователю2
  test-data: |
    нет
  steps:
    - Пользователь1 в списке приглашений напротив приглашения Пользователю2 нажимает Cancel
  expected-result: |
    Пользователь1 и Пользователь2 видят на странице лобби, что число приглашений уменьшилось на 1 (возле имени пользователя)

- summary: |
    Сдача во время игры
  requirement: |
    Пользователь должен иметь возможность сдаться во время игры
  prerequisites: |
    Пользователь создал игру с ботом
  test-data: |
    нет
  steps:
    - Пользователь нажимает во время игры Сдаться
    - Подтверждает действие, нажав Give Up
  expected-result: |
    На экране появится сообщение о том, что пользователь сдался

- summary: |
    Повтор игры с ботом после ее завершения
  requirement: |
    Пользователь должен иметь возможность повторить игру c ботом после того, как она окончена
  prerequisites: |
    Пользователь создал игру с ботом
    Игра завершена
  test-data: |
    нет
  steps:
    - Пользователь нажимает на экране с игрой Rematch
  expected-result: |
    Запустилась новая игра с ботом

- summary: |
    Возврат в активную игру после выхода из нее
  requirement: |
    Пользователь должен иметь возможность выйти из игры и вернуться в нее
  prerequisites: |
    Пользователь создал игру с ботом
  test-data: |
    нет
  steps:
    - Пользователь выходит из игры
    - В списке активных игры на странице лобби нажимает Continue
  expected-result: |
    Пользователь вернулся в игру

- summary: |
    Просмотр чужой игры, когда она идет (активная)
  requirement: |
    Пользователь должен иметь возможность наблюдать за чужой игрой, когда она идет
  prerequisites: |
    Пользователь1 создал игру с ботом
    Пользователь2 авторизован на сайте
  test-data: |
    нет
  steps:
    - Пользователь2 в списке игры на странице лобби находит игру Пользователя1
    - Нажимает Show
  expected-result: |
    Пользователь2 видит, что происходит в игре Пользователя1 и бота

- summary: |
    Проверка отображения наблюдателя в списке участников игры
  requirement: |
    Сайт должен показывать участникам игры пользоватетелей, который сейчас наблюдают за их игрой
  prerequisites: |
    Пользователь1 создал игру с ботом
    Пользователь2 авторизован на сайте
  test-data: |
    нет
  steps:
    - Пользователь2 в списке игры на странице лобби находит игру Пользователя1
    - Нажимает Show
  expected-result: |
    Пользователь1 видит в списке участников Пользователя2

- summary: |
    Проверка автоматического завершения игры по времени
  requirement: |
    Сайт должен завершать игру через заданный для игры интервал времени
  prerequisites: |
    Пользователь1 создал игру с Пользователем2 продолжительностью 3 минуты
  test-data: |
    нет
  steps:
    - Пользователь1 ничего не делает во время игры
    - Пользователь2 ничего не делает во время игры
  expected-result: |
    Через 3 минуты игра завершится автоматически

  

